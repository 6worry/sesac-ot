<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flash message test</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>
<body>
    <h1>로그인창</h1>
    {% if successMessage.message === success %}
    {% for message in successMessage %}
        <div class="alert alert-{{ message.type }} alert-dismissible fade show">
            {{ message.text }}
            <button type="button" class="close" data-dismiss="alert">
            </button>
        </div>
    {% endfor%}
    {% endif %}

    {% if errorMessage.length > 0 %}
        <div class="alert alert-danger">
            <p>{{ errorMessage }}</p>
        </div>
    {% endif %}

    <form action="/login" method="post">
        <label for="username">Username:</label>
        <input class="form-control" type="text" id="username" name="username">
        <br>
        <label for="username">Password:</label>
        <input class="form-control" type="text" id="password" name="password">
        <br>
        <button class="btn btn-primary" type="submit">login</button>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    <script>
        function closeFlashMessage(flashAlert){
            var bsAlert = new bootstrap.Alert(flashAlert);
            bsAlert.close();
        };

        document.addEventListener('DOMContentLoaded', function() {
            var flashAlerts = document.querySelectorAll('.alert');
            if (flashAlerts.length > 0) {
                flashAlerts.forEach(function (flashAlert) {
                    setTimeout(() => {
                        closeFlashMessage(flashAlert);
                    }, 2000);
                });
            };
        });
    </script>
</body>
</html>